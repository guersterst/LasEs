\documentclass{beamer}

\usepackage[ngerman]{babel}
\usepackage{graphicx}
\usepackage{hyperref}


% Example here:
% https://github.com/josephwright/beamer/blob/main/doc/solutions/conference-talks/conference-ornate-20min.de.tex

\mode<presentation>
{
    \usetheme{Singapore}
%\usetheme{AnnArbor}
%\usecolortheme{beaver}
}

\title{Kolloquium Pflichtenheft}
\subtitle{SEP WS 2021/2022}

%\titlegraphic{\includegraphics[width=5cm]{../../docs/Pflichtenheft/graphics/LasEs-logo}}

\date{\small 30. November 2021}
\logo{\includegraphics[width=1.5cm]{../../docs/Pflichtenheft/graphics/LasEs-logo}}

\author{\textbf{Team 2} \\ \small {Johann Schicho, Stefanie Gürster, Thomas Kirz,\\ Johannes Garstenauer, Sebastian Vogt} \\ \vspace{0.5cm}\emph{Phasenleiter: Johannes Garstenauer}\normalsize}


\begin{document}

    \begin{frame}
        \titlepage
    \end{frame}

    \begin{frame}{Gliederung}
        \tableofcontents
    \end{frame}


    \section{Änderungen zum Pflichtenheft und Entwurf}

    \begin{frame}{Änderungen}
        Vereinfachungen \& Übersichtlickeit
        (Um das Produkt für Sie besser zu gestalten haben wir einige Verbesserungen vorgenommen:)
        \begin{itemize}
            \item Neue Pakete zur Übersichtlichkeit und Einhaltung der selbstdefinierten Paketfunktionen
            z.B. persistence.internals zum Zugriff auf Konfig \& Res.Bundles, da repositories für entitäten gedacht sind.
            \item Verwendung des Standardlogger
            \item Facelets wurden zusammengelegt (z.B. Ansicht und Bearbeitung einer Einreichung)
            \item Pagination DTOs wurden simplifiziert
        \end{itemize}
        Verinfachungen machen die Implementation weniger zeitaufwendig.
        Übersichtlichkeit macht die Planung leíchter.
        Somit ist das Produkt günstiger für Sie.
    \end{frame}


    \section{Ordner- & Paketstruktur}

    \begin{frame}{Ordnerstruktur}
        Übersichtlichkeit und Zugriffskontrolle
        \centering
        \includegraphics[height=1.1\textheight]{graphics/w2_folder_final}
        Ausschnitt ab ressources
        \begin{itemize}
            \item Labels, Tooltips und UI-Nachrichten in mehreren jew. einsprachigen Resource-Bundles.
            -> bietet Internationalisierbarkeit und leichtes Hinzufügen neuer Sprachen.
            \pause
            \item Konfigurationsdateien im \emph{WEB-INF}-Verzeichnis um sie vor unautorisierten
            Zugriffen schützen.
            \pause
            \item Tests nach Paketen, Performance und Selenium unterteilt, (Feine Unterteilung der Testpakete)
            um zu modularem Testing anzuregen.
        \end{itemize}
    \end{frame}

    \begin{frame}{Paketdiagramm}
        \centering
        \includegraphics[height=1.1\textheight]{graphics/Paketdiagramm (15)}
        \begin{itemize}
            \item Größtenteils gleichgeblieben. Änderungen aus Punkt 1 wurden übernommen.
            \item Wir haben besonders darauf geachtet:
            \item Klare Trennung der Schichten, verständliche Interfaces und v.a. schwache Kopplung!
            \item Wir garantieren: Sie können diese Anwendung noch sehr lange verwenden,
            alle schichtenspezifischen Technolgien wie z.B. die PostGres-Datenbank
            oder Facelets von JSF sind komplett und problemlos austauschbar:
            \item Schichten wissen nichts voneinander ausser durch die Interfaces!
        \end{itemize}
    \end{frame}


    \section{Datenfluss}
    %Beispiel des Upload einer Revision
    %mit Exkursen anhand derer typische Klassenspezifikationen klar werden sollen.
    % Beginnen wir mit dem notwendigen Facelet.
    \begin{frame}{submission.xhtml}
        \begin{itemize}
            %Ziel: Welche Elemente verwenden wir:
            %-> Personalisierte Seiten für bestimmte Nutzerrollen
            \item 'rendered='
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/fac_rendered}

            %-> Zur Eingabevalidation erstens
            \item 'required=' + 'requiredMessage='
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/fac_required}
            %-> mit message aus RessourceBundle %todo wie?
            %-> Zur Eingabevalidation zweitens
            \item Custom Validatoren
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/doc_validator}

            % -> sonst enthalten sie das übliche
            \item z.B. <h:commandButtons> für action-Methoden %todo img opt
            \item z.B. <h:outputText> um DTO-Daten darzustellen %todo img opt
            \item Pagination, Lists (<f:param>) %todo wie?
            -> unsere Pagination ist leistungsfähig und adaptierbar an persönlich Verwendung
            durch hervorragende Sortierbarkeit und Filterbarkeit
            -> Sie können ihr Produkt an Profis verkaufen

            % -> Der Aufbau der Daten die im Facelet angezeigt werden erfolgt folgendermaßen:
            % -> Erhalten der Id der Einreichung
            \item <f:viewParam> %todo wie?
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/fac_viewParam}

            % -> Dieses wird mithilfe ... validiert
            \item <f:event>
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/fac_event}

            % -> Schließlich: Starten der onLoad() zum befüllen der DTOs
            \item <f:viewAction>
            \centering
            \includegraphics[height=1.1\textheight]{graphics/facelet/fac_onLoad}
            %todo wieso so? wieso hat sich das geändert?
        \end{itemize}
    \end{frame}

    % Nun liegt die Arbeit beim zugehörigen Backing Bean.
    \begin{frame}{Typische Klasse \textbf{Kontrollschicht}:}
        \emph{SubmissionBacking}
        \centering
        \includegraphics[height=1.1\textheight]{graphics/backing/doc_backing}
        \pause
        \begin{itemize}
            % Zuerst werden dessen nötige DTOs initalisiert
            % -> Instanziierung aller benötigten DTOs z.B.:
            %            -User mit ID aus Session
            %            -Submission
            \item init()
            \centering
            \includegraphics[height=1.1\textheight]{graphics/backing/doc_init}

            % Befüllen der DTOs mithilfe id aus <f:viewParam>
            % Getriggert durch vorheriges <f:viewAction>
            % -> %todo grund design
            \item onLoad()
            \centering
            \includegraphics[height=1.1\textheight]{graphics/backing/doc_onLoad}


            \item Notwendige Getter & Setter %todo wo sind die Setter
            \item Versch. notwendige action Methoden %todo img übersicht opt
        \end{itemize}
    \end{frame}

    % Für diese action-Methoden und für unser Beispiel die onLoad() benötigen wir nun Zugriff auf
    % die Daten und die Businesslogik, welche durch den SubmissionService zur Verfügung gestellt wird

    \begin{frame}{Typische Klasse \textbf{Businessschicht}:}
        \emph{SubmissionService}
        \centering
        \includegraphics[height=1.1\textheight]{graphics/backing/doc_service}
        \pause
        \begin{itemize}
            % Für das Laden der DTOs wird ein get() benötigt.
            \item get()
            \item add()
            \centering
            \includegraphics[height=1.1\textheight]{graphics/backing/doc_get_add}
            \item change()
            \centering
            \includegraphics[height=1.1\textheight]{graphics/backing/doc_change}
            %-> einheitliche und übersichtliche Interfaces:
            % Beachte: obwohl Methodensignatur selbe Parameter: verschiedene Anforderungen.
            % -> in javadoc spezifiziert
            % -> Ermöglicht Datenfluss ohne flache Parameter, gekapselt in DTOs

            \item einheitliche und übersichtliche Interfaces
            \item Hohe Überdeckung zu Persistenzschicht

            \item Event<UIMessage>
            % informiert den Nutzer über fehlerhaften Zustand aus unteren Schichten und in der Geschäftslogik
            % werden zu FacesMessages umgewandelt
            % -> Vorteil der Modulariät und Vermeidung von Coderedundanzen
            % -> günstigeres Produkt für Sie!

            \item %Todo woanders?
            \item verwendet Transaktionen:
            \item um ACID Eigenschaften sicherzustellen: Atomarität, Konsistenz, Isolation, Dauerhaftigkeit
            ?und Race-Conditions zu vermeiden?
        \end{itemize}
    \end{frame}


    \begin{frame}{Datenfluss - Teil 1}
        \begin{itemize}
            \item init() des @ViewScoped SubmissionBacking-Bean
            %todo sq_init, doc_init
            \item Setzen der ID der Submission mit <f:viewParam>
            %todo fac_viewParam
            \item Überprüfen der ID der Submission mit %todo preRenderViewParam
            \item onLoad()
            %todo doc_ get, doc_getRepo, fac_load()
            -> Laden der Daten in die DTOs
            %todo hier dtos erklären
            -> Mittels @Dependent SubmissionService doc_get: übergabe der submission id
            welcher durch viewParam erhalten wurde
            -> Datenbankzugriff mittels SubmissionRepository:
            -> benutzt Transaktion um ACID sicherzustellen
            %todo Hier Services und Repos erklären
            \item Upload
            -Validator
            - sonst analog
            - UIMessage
            - vllt noch auf transactions eingehen
        \end{itemize}
    \end{frame}

    \begin{frame}{Typische Klasse \textbf{Persistenzschicht}:}
        \emph{SubmissionRepository}.
        \pause
        \begin{itemize}
            \item Keine Attribute und nur statische Methoden
            \item angeboten zu fast jeder Entität
            \item Bietet bspw. add(Submission, Transaction), change(Submission, Transaction)
            und get(Submission, Transaction) an.
            \item Hier RaceConditions?
        \end{itemize}

        \begin{frame}{Session}
            \begin{itemize}
                \item User-DTO mit ID
                -Immer nur mit ID? Wieso nur Id? (Auf mehr Daten kann man sich nicht verlassen, dass diese vorhanden sind: Minimum)
                -Welche Elemente gerendert werden ist immer davon Abhängig wer eine bestimmte Seite sieht.
                -Sicherheit: Hat diese Session Zugriff auf best. Seite?
                - Wieso nicht mehr in Session (Privilege z.B.)
                \pause
                \item Locale zur Internationalisierbarkeit.
                - Ist Locale abfragbar? Sparen wir uns hiermit Anfragen an den Browser?
            \end{itemize}

            Nun möchte ich Ihnen ein Beispiel liefern wie dieser Entwurf zu einem nahtlos ineinandergreifenden
            Datenfluss führt:
            \begin{frame}{Beispiel: Hochladen einer Revision}
            \end{frame}
        \end{frame}

        \subsection{Gespeicherte Sessioninformationen}


        \section{Konfiguration}
        \begin{frame}{Allgemeine Konfiguration}
            Hier ein kurzer Blick auf die allgemeine Konfiguration
            -Validatorenkonfiguration (Filesizes)
            -Pagination
            -Debug
            -Mail
            -DB
            \centering
            \includegraphics[height=0.75\textheight]{../../docs/Pflichtenheft/graphics/Homepage-png}
        \end{frame}

        \begin{frame}{Loggerkonfiguration}
            -.log Files sowie Consolelogger zum Debugging
            \centering
            \includegraphics[height=0.75\textheight]{../../docs/Pflichtenheft/graphics/Submission-png}
        \end{frame}


        \section{Fehlerfall}
        \begin{frame}
            \begin{itemize}
                \item Unchecked Exception fliegt durch %todo bild seq
                \item %todo javadoc excHandler und excBB
                \item
                \item
            \item %todo erreich man die alte Seite durch zurück Pfeil?
            \end{itemize}
        \end{frame}


        \section{Libraries}
        \begin{frame}{Basis}
            Es gibt 137,000 python libraries, zu Java habe ich keine Zahlen gefunden aber sind vermutlich noch viel mehr.
            Diese würden uns vermutlich viele QOL Features anbieten.
            Damit man für das Hosten Anwendung kein eigenes Rechenzentrum anmieten muss,
            haben wir uns für ein paar wenige entschieden.
            Wir garantieren Ihnen: Unsere Anwendung wird ein Leichtgewicht.
            Was nicht bedeutet, dass es nicht mit Schwergewichtsboxern mithalten kann.
            \begin{itemize}
                \item Mojarra v3.0.1
                \item JBoss Weld v4.0.2
                \item PostGreSQL JDBC v42.3.1
                \item Jakarta Mail API v2.0.1
            \end{itemize}
        \end{frame}

        \begin{frame}{Quality of Life}
            \begin{itemize}
                \item Primefaces v10.0.0
                \item Bootstrap v5.1.3
            \end{itemize}
        \end{frame}

        \begin{frame}{Testing}
            \begin{itemize}
                \item JUnit v5.8.1
                \item Mockito v4.0.0
                \item Selenium v4.0.0
            \end{itemize}
        \end{frame}


        \section{Navigationsstruktur}
        \begin{frame}{Navigationsgraph}
            \centering
            \includegraphics[height=0.8\textheight]{../../docs/Pflichtenheft/graphics/benutzerFlussyEd-png}
        \end{frame}


        \section{Erweiterbarkeit}

        \begin{frame}{Erweiterbarkeit}
            \pause
            \begin{itemize}
                \item Anforderung von Revisionen
                \pause
                \item Mehrsprachige Anwendung
            \end{itemize}
        \end{frame}

        \begin{frame}{Abgrenzungskriterien}
            \pause
            \begin{itemize}
                \item Eigene Anwendung zur Betrachtung der Paper
                \pause
                \item Keine Publikationssoftware oder Lizenzierung
            \end{itemize}
        \end{frame}


        \section{Testing}
        \begin{frame}{Testabläufe}
            \pause
            Setup:
            \begin{itemize}
                \item mehrere Nutzer
                \item Testmodus (für E-Mailbestätigungen)
            \end{itemize}

            \pause

            Ablauf:
            \begin{itemize}
                \item Anlegen einer Konferenz \textbf{(Administrator)}
                \item Einreichung von Paper mit Ko-Autor \textbf{(Nutzer)}
                \item Editor kümmert sich um Gutachteraquirierung \textbf{(Editor \& Gutachter)}
            \end{itemize}
        \end{frame}

        \begin{frame}{Diskussion}
            \centering
            \includegraphics[width=0.7\linewidth]{../../docs/Pflichtenheft/graphics/LasEs-logo}
        \end{frame}

    \end{document}
