@startuml
'https://plantuml.com/sequence-diagram

'!theme aws-orange
skinparam sequenceMessageAlign center
'autonumber
'autoactivate on

actor Editor as editor
participant ":SubmissionBacking" as submissionBacking
participant ":ResourceBundle" as rscBundle
participant ":EmailService" as emailService
participant ":SubmissionStorage" as subStorage
participant "sub:Submission" as sub
database "Database" as db

editor -> submissionBacking ** : init()
note left
ruft die
Submission-
Seite auf
end note
activate submissionBacking
submissionBacking -> subStorage : getSubmission(subId)
activate subStorage
subStorage -> db : ...
activate db
return ...
create sub
subStorage -> sub
return sub : Submission
deactivate submissionBacking

editor -> submissionBacking : reject()
note left
klickt auf "Reject"
end note
activate submissionBacking
submissionBacking -> sub : reject()
activate sub
deactivate sub

submissionBacking -> sub : getAuthorEmailAddresses()
activate sub
return addrs
submissionBacking -> rscBundle : getRejectionEmailSubject()
activate rscBundle
return subject
submissionBacking -> rscBundle : getRejectionEmailBody()
activate rscBundle
return body

submissionBacking -> emailService : generateMailto(addrs, subject, body)
activate emailService
return mailtoLink

submissionBacking -> subStorage : updateSubmission(subId, sub)
activate subStorage
subStorage -> db : ...
activate db
deactivate db
deactivate subStorage

return mailtoLink


@enduml